# WooCommerce-HubSpot Customer Sync (Webhook)
## Purpose
This workflow automates the real-time synchronization of customer data from WooCommerce to HubSpot, ensuring that new customers are promptly added or updated in the CRM. It reduces manual data entry, improves data accuracy, and supports configurable options for updating existing contacts, tracking origin metadata, and sending notifications.
## Target audience
E-commerce managers, marketing professionals, and developers who manage customer relationships across WooCommerce and HubSpot platforms. Users should have basic knowledge of webhooks, API integrations, and n8n workflow configuration.
## Overview
The workflow is triggered by WooCommerce webhook events for new customer creations. It loads configuration settings to control behavior, extracts customer data, performs lookups in HubSpot, and conditionally processes contacts based on email existence and update preferences. Error handling ensures robustness by capturing failures, and optional features like metadata sync and notifications enhance functionality.

```mermaid
  graph TD
    A[Webhook Trigger] --> B[Load Configuration]
    B --> C{Notifications Enabled?}
    C -->|Yes| D[Send Start Notification]
    C -->|No| E[Extract Customer Data]
    D --> E
    E --> F[Search HubSpot by Email]
    F --> G{Contact Exists?}
    G -->|Yes| H{Update Existing Contacts?}
    G -->|No| I[Process New Contact]
    H -->|Yes| I
    H -->|No| J[Skip Contact]
    I --> K[Batch Processing]
    K --> L{Has Valid Email?}
    L -->|Yes| M[Create/Update Contact in HubSpot]
    L -->|No| N[Skip Invalid Email]
    M --> O{Sync Origin Metadata?}
    O -->|Yes| P[Update Custom Property]
    O -->|No| Q[Processing Complete]
    P --> Q
    Q --> R{Notifications Enabled?}
    R -->|Yes| S[Send End Notification]
    R -->|No| T[Workflow Finished]
    S --> T
    style A fill:#1e3a5f,color:white
    style B fill:#2c5f2d,color:white
    style C fill:#5d4037,color:white
    style D fill:#7b1fa2,color:white
    style E fill:#0277bd,color:white
    style F fill:#388e3c,color:white
    style G fill:#f57c00,color:white
    style H fill:#c2185b,color:white
    style I fill:#00796b,color:white
    style J fill:#616161,color:white
    style K fill:#5d4037,color:white
    style L fill:#d84315,color:white
    style M fill:#2e7d32,color:white
    style N fill:#757575,color:white
    style O fill:#6a1b9a,color:white
    style P fill:#ad1457,color:white
    style Q fill:#00695c,color:white
    style R fill:#5d4037,color:white
    style S fill:#7b1fa2,color:white
    style T fill:#1b5e20,color:white
```
# How-to Guide
## Step by step
1. ğŸ—ï¸ Set up the WooCommerce webhook: In your WooCommerce admin, go to Advanced > Webhooks, create a new webhook for 'Customer created' events, and set the delivery URL to the webhook URL provided by this n8n workflow.
2. ğŸ” Configure credentials: In n8n, add WooCommerce API credentials (store URL, consumer key, consumer secret) and HubSpot app token credentials.
3. âš™ï¸ Adjust configuration: Open the Conf node and set the boolean flagsâ€”sync_origin_metadata, update_existing_contacts, notificationsâ€”to true or false based on your requirements.
4. ğŸ§ª Test the workflow: Activate the workflow in n8n, create a test customer in WooCommerce, and check HubSpot to verify the contact is created or updated correctly.
5. ğŸ“ˆ Monitor performance: Use n8n's execution list to review workflow runs and ensure no errors occur during synchronization.
## Conditional Paths
ğŸ”€ If update_existing_contacts is disabled, existing HubSpot contacts are skipped, and only new contacts are created.
ğŸ”€ If sync_origin_metadata is enabled, the 'origin_site' custom property is updated in HubSpot only if it is currently empty.
ğŸ”€ Notifications for workflow start and end are sent only if the notifications flag is enabled in the Conf node.
ğŸ”€ Customers without valid email addresses are skipped during processing to avoid errors.
## Success Criteria
âœ… A contact is successfully created or updated in HubSpot with the correct customer data from WooCommerce.
âœ… No errors are recorded in the n8n execution logs for the contact synchronization process.
âœ… If enabled, notifications are delivered without issues, and origin metadata is added as specified.

# Reference
## Technical Specifications
This workflow uses n8n nodes including Webhook, Configuration, IF conditions, Data Extraction, HubSpot Lookup, Loop, Validation, Contact Creation/Update, and Error Handling. It leverages WooCommerce REST API for webhook events and HubSpot CRM API for contact management. The workflow is designed for real-time processing with configurable error handling to continue on failures.
## Input/Output
## Input Parameters
| Attribute | Data Type | Description |
|-----------|-----------|-------------|
| email | string | Customer email address from WooCommerce webhook payload |
| first_name | string | Customer first name from WooCommerce |
| last_name | string | Customer last name from WooCommerce |
| billing_address | object | Billing address details including street, city, and country |
| id | integer | Unique customer ID from WooCommerce |

## Output Parameters
| Attribute | Data Type | Description |
|-----------|-----------|-------------|
| id | string | HubSpot contact ID generated upon creation or update |
| properties | object | Contact properties mapped from WooCommerce, such as name, email, and lifecycle stage |
| error_message | string | Details of any errors encountered during contact processing |
| origin_site | string | Custom property value set if sync_origin_metadata is enabled |
## Dependencies
ğŸ”— WooCommerce API credentials must be valid and have permissions to access customer data.
ğŸ”— HubSpot app token must have sufficient scopes to create and update contacts.
ğŸ”— WooCommerce webhook must be correctly configured and accessible for event delivery.
ğŸ”— If sync_origin_metadata is used, the 'origin_site' custom property must exist in the HubSpot account.
ğŸ”— n8n instance must have network access to both WooCommerce and HubSpot APIs.

# Tutorial
## Learning Path
ğŸ§­ Begin by understanding webhook basics and how they trigger workflows in n8n.
ğŸ§­ Explore the WooCommerce and HubSpot node configurations in n8n to familiarize yourself with data mapping.
ğŸ§­ Practice with simple sync workflows before customizing this template for advanced use cases.
ğŸ§­ Refer to n8n documentation for error handling and node-specific settings to deepen your knowledge.

## Practice Exercises
ğŸ› ï¸ Modify the workflow to sync additional customer fields like phone number or company details from WooCommerce to HubSpot.
ğŸ› ï¸ Add a node to send a personalized welcome email via HubSpot after contact creation.
ğŸ› ï¸ Test error scenarios by intentionally providing invalid email addresses in WooCommerce and observe how the workflow handles them.
ğŸ› ï¸ Implement a fallback mechanism, such as a retry logic, for failed contact updates using n8n's error handling features.